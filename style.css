/* ===============================
   RESET
=============================== */

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  --card-gap: 14px;
  --card-scale: 1;
  --card-width: 90px;
  --card-height: 130px;
}

body {
  background: radial-gradient(circle at top, #0b3d2e, #02140e);
  font-family: system-ui, Arial, sans-serif;
  color: white;
  height: 100vh;
  overflow: hidden;
}

/* ===============================
   EFFECT OVERLAY
=============================== */

#tableOverlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 99999;
}

/* ===============================
   MENU
=============================== */

.menu-screen {
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.menu-title {
  font-size: 64px;
  margin-bottom: 40px;
}

.menu-buttons {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.menu-btn {
  padding: 14px 40px;
  border-radius: 14px;
  border: none;
  font-size: 20px;
  cursor: pointer;
}

.menu-btn.primary {
  background: #22c55e;
  color: #062312;
}

.menu-btn.disabled {
  background: #555;
  opacity: .5;
}

.menu-footer {
  margin-top: 40px;
  opacity: .5;
}

/* ===============================
   GAME LAYOUT
=============================== */

#game {
  width: 100%;
  height: 100vh;
}

#gameInner {
  position: relative;
  width: 100%;
  height: 100%;
  max-width: 1200px;
  margin: auto;
  display: grid;
  grid-template-rows: auto 40px 1fr auto auto;
  padding: 20px;
}

/* ===============================
   PC AREA
=============================== */

#pcArea {
  display: flex;
  justify-content: center;
}

#pcHand {
  display: flex;
  gap: 8px;
}

.pc-card {
  width: 60px;
  height: 90px;
  background: url("cards/back.png") center/cover no-repeat;
  border-radius: 8px;
}

/* ===============================
   TURN INDICATOR
=============================== */

.turn-indicator {
  position: absolute;
  text-align: center;
  font-size: 18px;
  opacity: .85;
}

/* ===============================
   TABLE
=============================== */

#table {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 60px;
  position: absolute;
}

#tableCard img {
  width: 110px;
}

#deck img {
  width: 80px;
  cursor: pointer;
}


/* ===============================
   PLAYER HAND
=============================== */

#playerCards {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: var(--card-gap);
  margin-top: 12px;
  margin-bottom: 90px;
  overflow: visible;
}

/* ===============================
   CARD
=============================== */

.card {
  backface-visibility: hidden;
  width: var(--card-width);
  height: var(--card-height);
  position: relative;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 1;

  transition: transform .16s ease;
  will-change: transform;
}

/* CARD IMAGE */

.card img {
  width: 100%;
  height: auto;
  transform: scale(var(--card-scale));
  transition: transform .16s ease;
  backface-visibility: hidden;
  image-rendering: crisp-edges;
}

/* HOVER */

.card:hover {
  transform: translateY(-10px) scale(1.02);
}

/* SELECTED */

.card.selected {
  transform: translateY(-28px) scale(1.05);
  z-index: 10;
}

/* GOLD HALO */

.card.selected::before {
  content: "";
  position: absolute;
  inset: -20px;
  border-radius: 18px;

  background: radial-gradient(
    circle,
    rgba(255,220,80,.9),
    rgba(255,170,0,.55),
    rgba(255,140,0,.25),
    transparent 75%
  );

  filter: blur(12px);
  z-index: -1;

  animation: goldGlowPulse 1.2s ease-in-out infinite;
}

@keyframes goldGlowPulse {
  0% { opacity:.75; transform:scale(1); }
  50% { opacity:1; transform:scale(1.12); }
  100% { opacity:.75; transform:scale(1); }
}

/* ===============================
   CONTROLS
=============================== */

#controls {
  position: fixed;
  bottom: 12px;
  left: 50%;
  transform: translateX(-50%);

  z-index: 2000;

  background: rgba(0,0,0,.35);
  backdrop-filter: blur(6px);

  padding: 8px 18px;
  border-radius: 16px;

  box-shadow: 0 0 25px rgba(34,197,94,.3);
}

.action {
  padding: 12px 28px;
  font-size: 16px;
  border-radius: 10px;
  border: none;
  cursor: pointer;

  background: linear-gradient(135deg,#22c55e,#16a34a);
  color: #052e16;

  box-shadow: 0 4px 12px rgba(0,0,0,.4);

  transition: transform .15s ease;
}

.action:hover {
  transform: translateY(-2px) scale(1.05);
}

.action:active {
  transform: scale(.96);
}

/* ===============================
   ACE DECISION
=============================== */

.ace-decision {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.7);
  display: flex;
  gap: 20px;
  justify-content: center;
  align-items: center;
  z-index: 6000;
}

/* ===============================
   SUIT CHOOSER
=============================== */

#suitChooser {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.7);
  display: flex;
  gap: 18px;
  justify-content: center;
  align-items: center;
  z-index: 6000;
}

#suitChooser button {
  background: none;
  border: none;
  cursor: pointer;
}

#suitChooser img {
  width: 80px;
  transition: transform .15s ease, filter .15s ease;
}

#suitChooser img:hover {
  transform: scale(1.18);
  filter: drop-shadow(0 0 16px gold);
}

/* ===============================
   END SCREEN
=============================== */

#endScreen {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: none;
  opacity: 0;
  transition: 0.4s ease;
  z-index: 100;
}

#endScreen.active {
  opacity: 1;
  pointer-events: all;
}


.endBox {
  background: #041d16;
  padding: 32px 48px;
  border-radius: 20px;
  text-align: center;
}

.endBox h1 {
  margin-bottom: 20px;
  font-size: 36px;
}

/* BUTTONS */

.endButtons {
  display: flex;
  gap: 16px;
  justify-content: center;
}

/* RESTART + MENU */

#restartBtn,
#menuBtn {
  padding: 14px 36px;
  font-size: 18px;
  font-weight: 800;
  border-radius: 14px;
  border: none;
  cursor: pointer;
}

/* WIN */

.win-pulse {
  animation: winPulse 1.2s ease-in-out infinite;
  text-shadow:
    0 0 15px rgba(255,215,0,.9),
    0 0 45px rgba(255,180,0,.8),
    0 0 100px rgba(255,140,0,.7);
}

@keyframes winPulse {

  0% {
    transform: scale(1);
    text-shadow:
      0 0 12px rgba(255,215,0,.7),
      0 0 30px rgba(255,180,0,.5);
  }

  50% {
    transform: scale(1.06);
    text-shadow:
      0 0 30px rgba(255,215,0,1),
      0 0 80px rgba(255,180,0,.95),
      0 0 160px rgba(255,140,0,.85);
  }

  100% {
    transform: scale(1);
  }
}



#restartBtn.win,
#menuBtn.win {
  background: linear-gradient(135deg,#ffd700,#ffae00);
  color: #3a2400;
  box-shadow: 0 0 20px gold;
}

/* LOSE */

#restartBtn.lose,
#menuBtn.lose {
  background: linear-gradient(135deg,#ef4444,#b91c1c);
  color: white;
  box-shadow: 0 0 20px red;
}

/* ===============================
   PENALTY
=============================== */

#penaltyPop {
  pointer-events: none;
}

/* ===============================
   SHAKE
=============================== */

.shake-light { animation: shakeLight .35s; }
.shake-medium {
  animation: shakeMedium .5s;
}

.shake-strong {
  animation: shakeStrong .7s;
}


@keyframes shakeLight {
  0% { transform: translate3d(0,0,0); }
  20% { transform: translate3d(-6px,4px,0); }
  40% { transform: translate3d(6px,-4px,0); }
  60% { transform: translate3d(-5px,4px,0); }
  80% { transform: translate3d(5px,-3px,0); }
  100% { transform: translate3d(0,0,0); }
}

#loseBox {
  transform: scale(0.6);
  opacity: 0;
}

#endScreen.active #loseBox {
  animation: loseImpact 0.5s cubic-bezier(.2,1.4,.4,1) forwards;
}

@keyframes loseImpact {
  0% {
    transform: scale(0.6);
    opacity: 0;
  }
  70% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}


@keyframes shakeMedium {
  0% { transform: translate3d(0,0,0); }

  20% { transform: translate3d(-10px,7px,0); }
  40% { transform: translate3d(10px,-7px,0); }
  60% { transform: translate3d(-8px,6px,0); }
  80% { transform: translate3d(8px,-6px,0); }

  100% { transform: translate3d(0,0,0); }
}


@keyframes shakeStrong {
  0% { transform: translate3d(0,0,0); }

  12% { transform: translate3d(-20px,14px,0); }
  25% { transform: translate3d(20px,-14px,0); }

  37% { transform: translate3d(-18px,12px,0); }
  50% { transform: translate3d(18px,-12px,0); }

  65% { transform: translate3d(-14px,10px,0); }
  80% { transform: translate3d(14px,-10px,0); }

  100% { transform: translate3d(0,0,0); }
}



/* ===============================
   CONFETTI
=============================== */

.confetti {
  position: fixed;
  pointer-events: none;
  will-change: transform;
  backface-visibility: hidden;
}

/* ===============================
   MOBILE
=============================== */

@media (max-width:700px) {

  .menu-title { font-size: 42px; }

  #tableCard img { width: 90px; }

  .pc-card { width: 48px; height: 72px; }

  .card img { width: 70px; }

}

.slowmo * {
  transition-duration: 0.35s !important;
  animation-duration: 0.35s !important;
}


#darkOverlay {
  position: fixed;
  inset: 0;
  background: black;
  opacity: 0;
  pointer-events: none;
  transition: 0.4s ease;
  z-index: 90;
}

#darkOverlay.active {
  opacity: 0.55;
}


.loseBox {
  animation: loseImpact 0.5s cubic-bezier(.2,1.4,.4,1);
}

@keyframes loseImpact {
  0% {
    transform: scale(0.6);
    opacity: 0;
  }
  70% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes screenShake {
  0% { transform: translate(0); }
  25% { transform: translate(-6px, 4px); }
  50% { transform: translate(6px, -4px); }
  75% { transform: translate(-4px, -2px); }
  100% { transform: translate(0); }
}

.shake {
  animation: screenShake 0.25s ease;
}

.lose-pulse {
  animation: losePulse 1.2s ease-in-out infinite;
  text-shadow:
    0 0 12px rgba(255,0,0,.9),
    0 0 40px rgba(255,0,0,.7),
    0 0 90px rgba(180,0,0,.6);
}

@keyframes losePulse {

  0% {
    transform: scale(1);
    text-shadow:
      0 0 12px rgba(255,0,0,.7),
      0 0 30px rgba(255,0,0,.5);
  }

  50% {
    transform: scale(1.05);
    text-shadow:
      0 0 25px rgba(255,0,0,1),
      0 0 70px rgba(255,0,0,.9),
      0 0 140px rgba(180,0,0,.7);
  }

  100% {
    transform: scale(1);
  }
}


.card,
.pc-card,
#tableCard img {
  will-change: transform;
}

/* ===== ACORN SIZE FIX ===== */

/* suit chooser (v√Ωber farby) */
#suitChooser img[src*="acorn"] {
  transform: scale(0.78);
}

/* forced suit indicator (indik√°tor pod stolom) */
#forcedSuitImg[src*="acorn"] {
  transform: scale(0.78);
}

.lobby-screen {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at top, #0e1f18, #050b08);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5000;
}

.lobby-box {
  width: 420px;
  padding: 26px 28px;

  background: rgba(15, 30, 22, 0.85);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);

  border-radius: 18px;

  border: 1px solid rgba(255,255,255,.06);

  box-shadow:
    0 25px 60px rgba(0,0,0,.7),
    inset 0 0 30px rgba(255,255,255,.02);

  animation: lobbyFade .35s ease;
}

@keyframes lobbyFade {
  from {
    opacity: 0;
    transform: translateY(12px) scale(.97);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* TITLE */

.lobby-title {
  font-size: 26px;
  font-weight: 800;
  letter-spacing: .6px;
  margin-bottom: 18px;
  color: #ecfdf5;
}

/* INPUT */

.lobby-section input {
  width: 100%;
  padding: 11px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.08);
  outline: none;

  background: rgba(0,0,0,.35);
  color: #ecfdf5;
  font-size: 14px;

  transition: .15s;
}

.lobby-section input:focus {
  border-color: #22c55e;
  box-shadow: 0 0 0 2px rgba(34,197,94,.15);
}

/* BUTTONS */

.buttons {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.lobby-btn {
  padding: 11px;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  letter-spacing: .3px;

  background: rgba(255,255,255,.05);
  color: #ecfdf5;

  transition: .15s;
}

.lobby-btn:hover {
  background: rgba(255,255,255,.08);
  transform: translateY(-1px);
}

/* PRIMARY */

.lobby-btn.primary {
  background: linear-gradient(180deg,#22c55e,#16a34a);
  color: white;

  box-shadow:
    0 6px 18px rgba(34,197,94,.25);
}

.lobby-btn.primary:hover {
  box-shadow:
    0 8px 22px rgba(34,197,94,.35);
}

/* READY */

.lobby-btn.ready {
  background: linear-gradient(180deg,#10b981,#059669);
  color: white;

  box-shadow:
    0 6px 18px rgba(16,185,129,.25);
}

/* START */

.lobby-btn.start {
  background: linear-gradient(180deg,#facc15,#eab308);
  color: #1a1200;

  box-shadow:
    0 8px 24px rgba(250,204,21,.4);
}

/* BACK */

.lobby-btn.back {
  margin-top: 14px;
  opacity: .8;
}

/* ROOM CODE */

.room-code {
  font-size: 14px;
  letter-spacing: 2px;
  color: #a7f3d0;
  margin: 12px 0;
}

/* PLAYER LIST */

.player-list {
  background: rgba(0,0,0,.35);
  padding: 10px;
  border-radius: 12px;
  margin-bottom: 10px;
}

/* PLAYER ROW */

.player-row {
  display: flex;
  justify-content: space-between;
  padding: 6px 6px;
  font-size: 14px;
  color: #ecfdf5;
}

/* HOST */

.player-host {
  color: #fde68a;
  font-weight: 600;
}

/* READY STATUS */

.player-ready {
  color: #4ade80;
}

/* ============================
   MULTIPLAYER TABLE LAYOUT
============================ */

#multiGameUI {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

/* COMMON PLAYER */

.multi-player {
  position: absolute;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* ============================
   TOP PLAYER
============================ */

.multi-player.top {
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  flex-direction: column;
}


/* ============================
   PLAYER NAMES
============================ */

.name-bar {

  background: rgba(0,0,0,.55);
  padding: 4px 12px;
  border-radius: 10px;

  font-weight: 700;
  font-size: 13px;
  letter-spacing: 1px;

  color: #22c55e;
  box-shadow: 0 0 10px rgba(0,255,160,.35);

  white-space: nowrap;
}


/* ===============================
   SINGLEPLAYER LOOK
=============================== */

body.single-mode #playerCards {
  --card-gap: 18px;
  --card-scale: 1.12;
}



body.single-mode #pcArea {
  position: fixed;
  top: 30px;
  left: 50%;
  transform: translateX(-50%) scale(1.2);
  opacity: 0.65;
  z-index: 10;
}


body.single-mode .card:hover {
  transform: translateY(-8px) scale(1.01);
}

body.single-mode .card.selected {
  transform: translateY(-26px) scale(1.05);
}

body.single-mode .turn-indicator {
  position: fixed;
  top: 140px;              
  left: 50%;
  transform: translateX(-50%);
  opacity: 0.7;
  z-index: 15;
}



/* ===============================
   SINGLEPLAYER LAYOUT
=============================== */

body.single-mode #gameInner {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

body.single-mode #pcArea {
  position: fixed;
  top: 40px;
  left: 50%;
  transform: translateX(-50%) scale(1.2);
  opacity: 0.65;
  z-index: 10;
}

body.single-mode #table {
  position: fixed;
  top: 50%;
  left: 50%;
  translate: -50% -55%;   
  z-index: 20;
}

body.single-mode .turn-indicator {
  position: fixed;
  top: calc(50% - 150px);
  left: 50%;
  transform: translateX(-50%);
  opacity: 0.7;
  z-index: 25;
}

body.single-mode #playerCards {
  position: fixed;
  bottom: 90px;
  left: 50%;
  transform: translateX(-50%);
  --card-gap: 18px;
  --card-scale: 1.12;
  z-index: 35;
}


body.single-mode #controls {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 35;
}

/* ===============================
   FORCED SUIT INDICATOR
=============================== */


#forcedSuitImg {
  width: 42px;
}


/* =========================================
   SINGLEPLAYER ‚Äì FINAL POSITION OVERRIDES
========================================= */


body.single-mode #turnIndicator {
  position: fixed !important;
  top: 150px !important;
  left: 50% !important;
  bottom: auto !important;
  transform: translateX(-50%) !important;
  z-index: 40;
}

/* FORCED SUIT ‚Äì NAD TVOJIMI KARTAMI */
body.single-mode #forcedSuitIndicator {
  position: fixed !important;
  top: auto !important;
  bottom: 180px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 45;
}



/* ===============================
   MULTIPLAYER LAYOUT
=============================== */

body.multi-mode #gameInner {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

body.multi-mode #pcArea {
  display: none;
}

body.multi-mode #multiGameUI {
  display: block;
}

body.multi-mode #table {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 50;
}


body.multi-mode #playerCards {
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  --card-gap: 10px;
  --card-scale: 0.95;
  z-index: 30;
}

body.multi-mode #controls {
  position: fixed;
  bottom: 25px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 35;
}

body.multi-mode .turn-indicator {
  background: rgba(2, 6, 23, 0.85);
  border: 1px solid rgba(255,255,255,.1);
  padding: 6px 14px;
  border-radius: 999px;
  font-size: 14px;
  box-shadow: 0 6px 20px rgba(0,0,0,.4);
}

body.multi-mode #multiGameUI {
  display: block;
}

body.multi-mode .multi-player {
  background: rgba(15, 23, 42, 0.85);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 10px 12px;
  backdrop-filter: blur(6px);
  box-shadow: 0 10px 30px rgba(0,0,0,.4);
  opacity: 0.75;
  transition: all .2s ease;
}

body.multi-mode .multi-player.active {
  opacity: 1;
  transform: scale(1.06);
  box-shadow:
    0 0 0 2px rgba(59,130,246,.6),
    0 0 30px rgba(59,130,246,.7);
}


@keyframes pulseTurn {
  0%   { box-shadow: 0 0 0 2px rgba(59,130,246,.5); }
  50%  { box-shadow: 0 0 0 6px rgba(59,130,246,.25); }
  100% { box-shadow: 0 0 0 2px rgba(59,130,246,.5); }
}


body.multi-mode .multi-player.top {
  top: 25px;
  left: 50%;
  transform: translateX(-50%);
}

body.multi-mode .multi-player.top .card-row {
  display: flex;
  flex-direction: row;      
  gap: 6px;
  justify-content: center;
  align-items: center;
}


body.multi-mode .multi-player.left {
  top: 50%;
  left: 25px;
  transform: translateY(-50%);
}


body.multi-mode .multi-player.right {
  top: 50%;
  right: 25px;
  transform: translateY(-50%);
}

body.multi-mode .multi-player.active {
  box-shadow: 0 0 25px rgba(59,130,246,0.6);
  border-radius: 12px;
}

body.multi-mode .player-cards {
  font-size: 13px;
  opacity: 0.75;
  margin-top: 4px;
}

body.multi-mode .name-bar {
  font-weight: 600;
  font-size: 14px;
}

body.multi-mode .card-count {
  font-size: 13px;
  opacity: 0.7;
}

body.multi-mode .turn-indicator {
  background: rgba(2, 6, 23, 0.85);
  border: 1px solid rgba(255,255,255,.1);
  padding: 6px 14px;
  border-radius: 999px;
  font-size: 14px;
  box-shadow: 0 6px 20px rgba(0,0,0,.4);
}

/* ===============================
   MULTIPLAYER ‚Äì SIDE HUD SHAPE FIX
=============================== */

body.multi-mode .multi-player.left .name-bar,
body.multi-mode .multi-player.right .name-bar {
  text-orientation: mixed;
  margin: 6px 0;
  font-size: 12px;
  opacity: 0.75;
}

body.multi-mode .multi-player.left,
body.multi-mode .multi-player.right {
  display: flex;
  flex-direction: row;          
  align-items: center;
  justify-content: center;
  gap: 10px;

  padding: 14px 10px;
  border-radius: 16px;
}


body.multi-mode .multi-player.left .name-bar,
body.multi-mode .multi-player.right .name-bar {
  min-width: 36px;
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  opacity: 0.85;
}

body.multi-mode .multi-player.right {
  flex-direction: row-reverse;
}

/* TOP ‚Äì bez rot√°cie */
body.multi-mode .multi-player.top {
  top: 25px;
  left: 50%;
  transform: translateX(-50%);
}

/* =====================================
   MULTIPLAYER ‚Äì FINAL CLEAN VERSION
===================================== */

/* COMMON PLAYER */
body.multi-mode .multi-player {
  position: absolute;
  display: flex;
  flex-direction: column;   /* üî¥ rovnak√© ako TOP */
  align-items: center;
  gap: 6px;

  background: rgba(10, 25, 35, 0.85);
  backdrop-filter: blur(6px);
  border-radius: 16px;
  padding: 10px 12px;

  box-shadow: 0 10px 30px rgba(0,0,0,.4);
}

/* TOP ‚Äì referenƒçn√Ω dizajn */
body.multi-mode .multi-player.top {
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
}

/* LEFT ‚Äì ten ist√Ω dizajn, otoƒçen√Ω ku stolu */
body.multi-mode .multi-player.left {
  top: 50%;
  left: 20px;
  transform: translateY(-50%) rotate(90deg);
  transform-origin: center;
}

/* RIGHT ‚Äì ten ist√Ω dizajn, otoƒçen√Ω ku stolu */
body.multi-mode .multi-player.right {
  top: 50%;
  right: 20px;
  transform: translateY(-50%) rotate(-90deg);
  transform-origin: center;
}

